20:55 19.05.2017

Куда смотреть
=============

- этот файл
- пробный запуск программы - [quick_look.py](https://github.com/epogrebnyak/data-rosstat-kep/blob/dev/src/quick_look.py)
- <https://github.com/epogrebnyak/data-rosstat-kep/blob/dev/src/todo.py>


Сценарии конечного пользователя
===============================

Сценарий 1:
- сгенерировать локальные csv файлы с данными на разную дату (vintages)
- получить ряды переменной из разных релизов 
- отрисовать переменную, показать величину пересмотров между релизами

Сценарий 2:    
- несколько рядов на один график 
- много таких графиков вместе
    
Направления
===========

@алгоритм
@структра пакета

@тесты

@файлы/данные

@фронтенд

@картинки
@расчет

@навести_красоту

Сделано
=======
Для полноты алгоритма:
- основное и дополниельные определения читаются в класс parsing_definitons.Specification

```
    import kep.reader.access as reader
    csv_dicts = list(reader.get_csv_dicts())   
    spec = reader.get_spec() #parsing_definitons.Specification
```
- каждому блоку приписывается свое определение для парсинга, все определения из *spec* участвуют в разборе, 
  изменения в containers.py - SegmentState()
 
```
  csv_dicts = SegmentState(spec).assign_parsing_definitions(csv_dicts)
```
 

- итоговый вызов:  
```
    d = Datapoints(csv_dicts, spec)
    output = list(d.emit('a'))
```

Для красоты: 
- в kep.parser.emitter введены классы Table и Row
- приходится убивать плодущиеся вспомогательные и тестовые фйлы и файлики

Критические задачи
==================
Ввести новые данные (ЕП):
- [ ] сгенерировать csv файлы с данными на разную дату релиза 
- [ ] уметь ориентироваться в структуре каталогов
- [ ] выложить csv на github

Качество парсинга:
- [ ] все ли переменные из опредления читаются <- сейчас развалились тесты для этого
- [ ] есть дубликаты точек - это очень плохо, но видно почему
- [ ] полнота тестирования

Тесты
- [ ] давно не запускал, видимо все развалилось

Риски:
- [ ] как только начнем читать много файлов все начнет разваливаться


Некритические задачи
====================
@навести_красоту
- [ ] есть желание отрефакторить итоговые функции доступа внутри пакета в стиле 
      <https://github.com/epogrebnyak/data-rosstat-kep/blob/dev/src/notes/main.py>

Новые задачи
============
@фронтенд:
- [ ] markdown талица с названиями переменных
- [ ] sparkline для месячных данных
- [ ] markdown таблица с послежними занчения 

@навести_красоту
- посомтреть что еще есть в мастере, что нет в dev

